<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600&display=swap"
    />
  </head>
  <body onload="getCurrentDate(); updateDate(); changeColor(); goToHomePage(); goToBrowseHomePage(); goToStaticHomePage(); goToSearchCustomerPage(); goToSearchRoomPage(); goToSearchBookingPage(); goToSearchServicePage(); goToSearchEmployeePage(); showPopup(); handleFileUpload(); handleFileDownload(); showDetailsPopup()">
    <form class="browse-element-page">
      <div class="sidebar">
        <div class="title-wrapper">
          <div class="title">Administration web</div>
        </div>
        <div class="menu-item-parent">
          <div class="menu-item">
            <div class="functions">Functions</div>
          </div>
          <div class="functionframe">
            <div class="menu-item1">
              <img class="home-icon" alt="" src="/img/home.png" />

              <div class="home">Home</div>
            </div>
            <div class="menu-item2">
              <img class="search-icon" alt="" src="/img/search.png" />

              <div class="browse">Browse</div>
            </div>
            <div class="menu-item3">
              <img class="radio-icon" alt="" src="/img/static.png" />
              <div class="static" >Statistic</div>
            </div>
          </div>
        </div>
      </div>
      <header class="card-header">
        <div class="content">
          <div class="text-and-supporting-text">
            <div class="text-and-badge">
              <div class="text">Welcome back, Admin</div>
              <div class="badge">
                <div class="badge-base">
                  <div class="text1">Date: <span id="current-date"></span></div>
                </div>
              </div>
            </div>
          </div>
          <div class="actions">
            <div class="button-04">
              <div class="button-base">
                <div class="text2">Tertiary</div>
              </div>
            </div>
            <div class="button-03">
              <div class="button-base1">
                <div class="text3">Secondary</div>
              </div>
            </div>
            <div class="button-5">
              <div class="button-base2">
                <img
                  class="download-cloud-02-icon"
                  alt=""
                  src="/img/cloud.jpg"
                />
                <div class="button">Export</div>
              </div>
            </div>
            <div class="button-01">
              <div class="button-base3">
                <img class="plus-icon" alt="" src="/img/plus.png" />
                <div class="text4">Add new File</div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div class="buttons-wrapper">
        <div class="buttons">
          <div class="frame-parent">
            <div class="icon-person-wrapper">
              <img class="icon-person" alt="" src="/img/icon _person.png" />
            </div>
            <div class="customers">Customers</div>
          </div>
          <div class="frame-group">
            <div class="vector-wrapper">
              <img class="vector-icon" alt="" src="/img/icon_room.png" />
            </div>
            <div class="rooms">Rooms</div>
          </div>
          <div class="frame-container">
            <div class="vector-container">
              <img class="vector-icon1" alt="" src="/img/icon_booking.png" />
            </div>
            <div class="booking">Booking</div>
          </div>
          <div class="frame-button">
            <div class="icon-service-wrapper">
              <img class="icon-service" alt="" src="/img/icon _service.png" />
            </div>
            <div class="services">Services</div>
          </div>
          <div class="frame-parent1">
            <div class="icon-employee-group-solid-wrapper">
              <img
                class="icon-employee-group-solid"
                alt=""
                src="/img/icon _employee.png"
              />
            </div>
            <div class="employees">Employees</div>
          </div>
        </div>
      </div>
      <div class="content-container">
        <div class="control-panel">
          <div class="button32">
            <div class="button42">Update</div>
          </div>
          <div class="button52">
            <div class="button62">Delete</div>
          </div>
          <div class="button72">
            <div class="button82">Add</div>
          </div>
          <div class="date-picker">
            <input
              type="date"
              name="date"
              class="date-input"
              placeholder="Select Date"
            />
          </div>
          
          <div class="input2">
            <form action="/browse/customer" method="GET">
              <input type="text" name="search" class="search2" placeholder="Search..." value="<%= search || '' %>">
              <button type="submit" style="background-color: #ffffff; border: none;"><img class="search-icon2" alt="" src="/img/search.png" /></button>
            </form>
          </div>
          <div class="button92">
            <img class="filter-icon2" alt="" src="/img/filter.png" />
          </div>
        </div>

        <div class="table-container">
          <% function renderTable(data, headers) { %>
            <table>
              <thead>
                <tr>
                  <% headers.forEach((header) => { %>
                    <th><%= header %></th>
                  <% }); %>
                </tr>
              </thead>
              <thead>
                <tr>
                  <td><input type="text" name="customerid" placeholder></td>
                  <td><input type="text" name="personalid" placeholder></td>
                  <td><input type="text" name="firstname" placeholder></td>
                  <td><input type="text" name="lastname" placeholder></td>
                  <td><input type="text" name="birthday" placeholder></td>
                  <td><input type="text" name="gender" placeholder></td>
                  <td><input type="text" name="email" placeholder></td>
                  <td><input type="text" name="phone" placeholder></td>
                  <td><input type="text" name="address" placeholder></td>
                  <td><input type="text" name="rank" placeholder></td>
                </tr>
              </thead>
              <tbody>
                <% data.forEach((row) => { %>
                  <tr>
                    <% headers.forEach((header, index) => { %>
                      <td class="last-column">
                        <div class="content-wrapper">
                          <%= row[header] %>
                          <% if (index === headers.length - 1) { %>
                            <img class="document-icon" src="/img/3doc.png" alt="Document" onclick="showDetailsPopup('<%= encodeURIComponent(JSON.stringify(row)) %>')">
                          <% } %>
                        </div>
                      </td>
                    <% }); %>
                  </tr>
                <% }); %>
              </tbody>
            </table>
          <% } %>
          <% renderTable(data, ['customerid', 'personalid', 'firstname', 'lastname', 'birthdate','gender', 'email', 'phone', 'address', 'namerank']) %>
        </div>

        <footer class="table-pagination2">
          <div class="of-972"></div>
          <div class="table-pagination-inner2">
            <div class="rows-per-page-parent2">
              <div class="rows-per-page2">Rows per page:</div>
              <div class="button-instance-parent2">
                <div class="button-instance2">20</div>
              </div>
            </div>
          </div>
          <div class="table-pagination-child2">
            <div class="button-parent2">
              <div
                class="button2"
                <%if (urlBeforePage === "/browse/customer/" || urlBeforePage.startsWith("/browse/customer/?page")) {%>
                  onclick="window.location.href='?page=<%= page - 1 %>'"
                <%} else {%>
                  onclick="window.location.href='<%= urlBeforePage%>&page=<%= page - 1 %>'"
                <%};%> 
                >
                <img
                  class="left-icon2"
                  loading="lazy2"
                  alt=""
                  src="/img/left.png"
                />
              </div>
              <div class="div2">
                <span class="span2"><%=page + 1%>/10</span>
                
              </div>
              <div class="button12">
                <div
                  class="button22"
                  <%if (urlBeforePage === "/browse/customer/" || urlBeforePage.startsWith("/browse/customer/?page")) {%>
                    onclick="window.location.href='?page=<%= page + 1 %>'"
                  <%} else {%>
                    onclick="window.location.href='<%= urlBeforePage%>&page=<%= page + 1 %>'"
                  <%};%>
                >
                  <img
                    class="right-icon2"
                    loading="lazy2"
                    alt=""
                    src="/img/right.png"
                  />
                </div>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </form>

    <div id="addPopup" class="popup">
      <div class="popup-content">
        <span class="close">&times;</span>
        <form class="popup-form" action="./addCustomer" method="post">
          <input type="text" name="new_customer" placeholder="New_Customer_id">
          <input type="text" name="personalid" placeholder="Personal_id">
          <input type="text" name="firstname" placeholder="First_name">
          <input type="text" name="lastname" placeholder="Last_name">
          <input type="text" name="birthdate" placeholder="Birthday">
          <input type="text" name="gender" placeholder="Gender">
          <input type="text" name="email" placeholder="Email">
          <input type="text" name="phone" placeholder="Phone">
          <input type="text" name="address" placeholder="Address">
          <input type="text" name="namerank" placeholder="Rank">
          <button type="submit" class="submit-button">Submit</button>
        </form>
      </div>
    </div>
    <div id="updatePopup" class="popup">
      <div class="popup-content">
        <span class="close update-close">&times;</span>
        <form class="popup-form" action="./updateCustomer" method="post">
          <input type="text" name="customerid" placeholder="Customer_id">
          <input type="text" name="personalid" placeholder="Personal_id">
          <input type="text" name="firstname" placeholder="First_name">
          <input type="text" name="lastname" placeholder="Last_name">
          <input type="text" name="birthday" placeholder="Birthday">
          <input type="text" name="gender" placeholder="Gender">
          <input type="text" name="email" placeholder="Email">
          <input type="text" name="phone" placeholder="Phone">
          <input type="text" name="address" placeholder="Address">
          <input type="text" name="namerank" placeholder="Rank">
          <button type="submit" class="submit-button">Submit</button>
        </form>
      </div>
    </div>
    <div id="deletePopup" class="popup">
      <div class="popup-content">
        <span class="close delete-close">&times;</span>
        <form class="popup-form" action="./deleteCustomer" method="post">
          <input type="text" name="delete_customer" placeholder="Customer id" />
          <button type="submit" class="submit-button">Delete</button>
        </form>
      </div>
    </div>
    <div id="documentDetailsPopupOverlay" class="document-popup-overlay" onclick="document.getElementById('documentDetailsPopupOverlay').style.display='none';">
      <div id="documentDetailsPopup" class="document-popup" onclick="event.stopPropagation();">
        <div class="document-popup-content">
          
        </div>
        <span class="document-close" onclick="document.getElementById('documentDetailsPopupOverlay').style.display='none'">&times;</span>
      </div>
    </div>
	<script src="main.js"></script>
  </body>
</html>
